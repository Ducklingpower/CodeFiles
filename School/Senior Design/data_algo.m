clc
close 
clear all
%%

data1 = [23.68, 16.47, 16.47, 17.44, 16.49, 16.47, 16.47, 16.46, 16.47, 12.78, ...
16.47, 16.46, 16.46, 16.57, 16.46, 16.15, 16.78, 18.04, 20.93, 21.23, ...
21.88, 20.28, 19.96, 17.73, 16.46, 15.83, 12.44, 11.42, 9.15, 7.80, ...
6.83, 6.19, 6.83, 8.13, 10.85, 13.12, 14.14, 16.80, 16.47, 18.05, ...
19.02, 20.60, 19.33, 18.07, 16.78, 15.83, 15.83, 12.78, 11.19, 9.49, ...
7.16, 6.51, 5.56, 6.51, 6.51, 9.49, 10.40, 13.12, 14.81, 17.73, ...
18.07, 19.33, 19.96, 20.93, 21.56, 21.25, 19.01, 19.01, 16.47, 16.15, ...
14.81, 11.87, 9.83, 9.83, 8.13, 6.83, 6.83, 6.51, 6.83, 9.15, 11.87, ...
12.55, 15.15, 15.83, 17.10, 17.73, 19.65, 19.97, 20.60, 20.60, 18.38, ...
18.05, 16.13, 14.48, 13.46, 11.08, 9.49, 8.45, 6.83, 5.22, 5.56, 4.90, ...
5.22, 5.22, 7.48, 10.17, 11.87, 13.12, 14.48, 16.15, 17.10, 17.75, ...
19.33, 19.01, 20.28, 19.97, 19.97, 18.70, 17.43, 16.46, 15.50, 13.12, ...
10.85, 9.49, 7.48, 6.51, 5.56, 4.27, 4.57, 5.87, 7.48, 8.81, 10.74, ...
12.44, 14.82, 15.83, 15.83, 16.78, 16.46, 17.41, 16.78, 16.15, 16.15, ...
14.84, 14.14, 13.14, 10.06, 9.06, 8.45, 6.51, 7.48, 6.51, 6.53, 0.00, ...
8.45, 9.83, 10.85, 12.78, 13.80, 0.00, 16.47, 16.78, 16.47, 16.17, ...
16.78, 15.16];

data2 = [12.89, 14.48, 16.80, 18.70, 21.30, 21.25, 21.56, 19.96, 18.11, 16.78, ...
15.15, 11.51, 10.17, 9.49, 9.49, 10.17, 11.53, 14.14, 15.84, 16.80, ...
19.97, 21.56, 22.80, 23.92, 23.66, 22.76, 21.88, 20.60, 18.45, 16.47, ...
15.50, 14.48, 13.46, 11.53, 9.83, 10.85, 12.21, 13.12, 14.93, 16.49, ...
18.05, 19.33, 20.28, 21.88, 21.93, 23.05, 23.34, 22.19, 21.62, 19.02, ...
19.74, 16.15, 15.25, 15.18, 11.19, 10.85, 9.49, 9.49, 9.23, 10.17, ...
10.17, 10.74, 10.57, 11.87, 11.76, 12.17, 12.19, 14.47, 13.19, 14.14, ...
13.21, 14.14, 15.25, 15.50, 16.52, 15.83, 15.88, 16.46, 16.52, 17.10, ...
15.90, 16.46, 17.80, 17.41, 17.17, 17.73, 19.07, 18.70, 18.77, 19.65, ...
19.01, 19.96, 20.04, 19.65, 18.99, 19.04, 18.70, 18.38, 17.48, 17.43, ...
17.10, 17.73, 16.15, 16.78, 15.90, 16.78, 16.15, 15.83, 16.20, 15.83, ...
16.78, 16.15, 15.57, 15.16, 14.82, 14.14, 13.45, 13.12, 12.53, 12.44, ...
12.10, 13.12, 12.44, 12.10, 11.25, 11.15, 10.51, 10.17, 9.23, 9.15, ...
9.83, 9.49, 9.15, 8.45, 9.23, 8.81, 6.90, 6.83, 6.51, 6.83, 7.55, ...
8.13, 7.87, 8.13, 8.13, 9.49, 9.91, 11.53, 11.19, 11.19, 10.93, 12.21, ...
13.12, 13.12, 13.21, 14.82, 15.57, 15.83, 15.57, 15.83, 15.57, 16.78, ...
16.61, 17.75, 17.75, 18.05, 18.38, 18.70, 19.01, 19.33, 19.96, 20.28, ...
20.91, 20.28, 20.60, 21.88, 22.20, 23.07, 21.56, 22.76, 23.07, 22.78, ...
23.09, 22.78, 23.36, 21.88, 21.25, 20.93, 19.97, 19.33, 17.75, 16.78, ...
14.82, 13.80, 12.44, 11.08, 10.17, 9.15, 9.49, 9.49, 10.51, 11.76, ...
13.80, 16.78, 17.10, 19.01, 21.23, 20.91, 21.56, 19.96, 18.04, 15.83, ...
14.50, 11.08, 10.85, 10.42, 11.42, 15.16, 17.75, 19.33, 21.25, 22.19, ...
20.28, 18.68, 16.13, 15.16, 11.76, 10.17, 9.83, 12.55, 14.82, 17.10, ...
19.02, 21.25, 22.76, 21.90, 20.93, 19.65, 17.10, 15.83, 13.79, 11.76, ...
10.17, 11.87, 13.46, 15.83, 16.78, 19.01, 19.65, 19.97, 19.33, 18.38, ...
16.46, 14.81, 13.12, 11.42, 11.87, 12.10, 13.12, 15.83, 16.15, 18.36, ...
19.01, 20.28, 21.23, 20.91, 18.68, 16.46, 15.15, 14.13, 13.46, 13.45, ...
12.78, 13.79, 15.50, 17.73, 19.33, 19.65, 19.63, 19.63, 18.05, 16.78, ...
14.82, 13.12, 12.10, 11.87, 11.53, 13.46, 14.81, 16.46, 18.38, 19.65, ...
20.28, 20.93, 20.60, 18.70, 16.78, 15.52, 13.12, 12.10, 11.19, 11.19, ...
13.80, 15.52, 17.10, 19.33, 20.93, 21.25, 19.65, 18.05, 16.47, 15.16, ...
14.14, 13.46, 14.82, 16.47, 17.73, 18.70, 20.91, 20.60, 18.68, 18.68, ...
16.13, 14.81, 14.47, 11.42, 11.87, 12.10];



figure
tiledlayout(2,1)
nexttile
plot(1:length(data1),data1,"*")
hold on
plot(1:length(data1),data1)

nexttile

plot(1:length(data2),data2,"*")
hold on
plot(1:length(data2),data2)


%% algo

algo_data = data1;
data = data1;
for i = 1:length(data)-5
x1 = data(i);
x2 = data(i+1);
x3 = data(i+2);
x4 = data(i+3);
x5 = data(i+4);

dx1 = x2-x1/0.1;
dx2 = x3-x2/0.1;
dx3 = x4-x3/0.1;
dx4 = x5-x4/0.1;

X_avg  = (x1+x2+x3+x4+x5)/5;
dX_avg = (dx1+dx2+dx3+dx4)/4;

if data(i+5) >= 1.7*X_avg && data(i+5) >= 1.7*dX_avg

    algo_data(i+5) = X_avg+1;
    data(i+5) = X_avg;

else
end
end

figure
plot(1:length(data1),data1,".-")
hold on
plot(1:length(algo_data),algo_data,".-")


